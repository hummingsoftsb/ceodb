<html>
   <head>
      <script type="text/javascript">
			$( document ).ready(function() {
				$("tr.bbb"+2).hide();
				$("tr.bbb"+3).hide();
				$("tr.bbb"+4).hide();
				console.log( "ready!" );
			});
			
            function showdiv() {
			var MyRows = $('table#station_box').find('tbody').find('tr');
			for (var i = 0; i < MyRows.length; i++) {
			var MyIndexValue = $(MyRows[i]).find('td:eq(0)').text();
			if($.trim(MyIndexValue)=='Retaining Structure'){
			$('#retaining_structure').show();
			$("tr.bbb"+3).slideUp( "slow" );
			$("tr.bbb"+4).slideUp( "slow" );
			} else if($.trim(MyIndexValue)=='Excavation'){
			
            } else if($.trim(MyIndexValue)=='RC Structure'){
			
			}else{}
			}
			}
			
			$('')
      </script>
   </head>
   <body>
<div class="header bg-dot30 excel-selection-1">
    <% if (typeof(data.data.date) !== "undefined") { %>
		<h2><%=data.title%></h2> <h2 class="asof">(As of <%=data.data.date%>)</h2>
	<% } else {%>
		<h2><%=data.title%></h2>
	<% } %>
    <i class="header-icon fa fa-check-square-o"></i>
</div>
<div class="content" style="background: none;/*#1d2a34*/">
    <%
    var raw = data.data;
	var levels = {"Station Box": "st","Entrance": "et","Vent Shaft": "vs"};
    %>

	
    <!-- Nav tab -->
    <ul class="nav nav-tabs" role="tablist" id="mytab">
        <li class="active"><a href="#station-box" role="tab" data-toggle="tab">Station Box</a></li>
        <li><a href="#entrance" role="tab" data-toggle="tab">Entrance</a></li>
        <li><a href="#vent-shaft" role="tab" data-toggle="tab">Vent Shaft</a></li>
    </ul>

    <!-- tab-content -->
    <div class="tab-content tab-style">
        
        
        
        <div class="tab-pane active" id="station-box">
			<!--content-->
			<div class="panel-group" id="accordion1">
				<%var count = 0; for (var i in raw["Station Box"]) { count++;
				var row = raw["Station Box"][i];			
				%>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion1" href="#<%=String.prototype.toSlug(i)%>2">
								<%=i%>
							</a>
						</h4>
					</div>
					<div id="<%=String.prototype.toSlug(i)%>2" class="panel-collapse collapse <%if(count==1){%>in<%}%>">
						<div class="panel-body">
							<table class="table table-bordered table-condensed table-hover" style="font-size: 100%;">
								<thead>
								<th style="text-align: center;width: 50%">Item</th><th style="color: #FFAF78;text-align: center;">Progress</th>
								</thead>
								<%for (var j in row) {
								if(typeof row[j] === 'number' || typeof row[j] === 'string') {
								%>
								<tr>
									<td style="font-size: 15px"><%=j%></td>
									<% if(typeof row[j] === "number") {%>
									<td style="color: #ffd461; text-align: right;"><%=row[j].toFixed(1)%>%</td>
									<%} else {%>
									<td style="color: #ffd461; text-align: right;">-%</td>
									<%}%>
								</tr>
							   <%}
							   else if(typeof row[j] === "object"){%>
							   <tr>
									<td style="font-size: 15px"><a href="#st-<%=String.prototype.toSlug(i)%>-<%=String.prototype.toSlug(j)%>" data-toggle="modal"><%=j%> <small><i class="fa fa-table"></i></small></a></td>
									<% if(typeof row[j] === "number") {%>
									<td style="color: #ffd461; text-align: right;"><%=row[j].progress.toFixed(1)%>%</td>
									<%} else {%>
									<td style="color: #ffd461; text-align: right;">-%</td>
									<%}%>
								</tr>
							   <%} }%>
							</table>
						</div>
					</div>
				</div>
				<%}%>
			</div>
			<!--content ends-->
        </div>
        
        <div class="tab-pane" id="entrance">
			<!--content-->
			<div class="panel-group" id="accordion2">
				<%var count = 0; for (var i in raw["Entrance"]) { count++;
				var row = raw["Entrance"][i];			
				%>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion2" href="#<%=String.prototype.toSlug(i)%>2">
								<%=i%>
							</a>
						</h4>
					</div>
					<div id="<%=String.prototype.toSlug(i)%>2" class="panel-collapse collapse <%if(count==1){%>in<%}%>">
						<div class="panel-body">
							<table class="table table-bordered table-condensed table-hover" style="font-size: 100%;">
								<thead>
								<th style="text-align: center;width: 50%">Item</th><th style="color: #FFAF78;text-align: center;">Progress</th>
								</thead>
								<%for (var j in row) {
								if(typeof row[j] === 'number' || typeof row[j] === 'string') {
								%>
								<tr>
									<td style="font-size: 15px"><%=j%></td>
									<% if(typeof row[j] === "number") {%>
									<td style="color: #ffd461; text-align: right;"><%=row[j].toFixed(1)%>%</td>
									<%} else {%>
									<td style="color: #ffd461; text-align: right;">-%</td>
									<%}%>
								</tr>
							   <%}
							   else if(typeof row[j] === "object"){%>
							   <tr>
									<td style="font-size: 15px"><a href="#et-<%=String.prototype.toSlug(i)%>-<%=String.prototype.toSlug(j)%>" data-toggle="modal"><%=j%> <small><i class="fa fa-table"></i></small></a></td>
									<% if(typeof row[j] === "number") {%>
									<td style="color: #ffd461; text-align: right;"><%=row[j].progress.toFixed(1)%>%</td>
									<%} else {%>
									<td style="color: #ffd461; text-align: right;">-%</td>
									<%}%>
								</tr>
							   <%} }%>
							</table>
						</div>
					</div>
				</div>
				<%}%>
			</div>
			<!--content ends-->
        </div>
        
        <div class="tab-pane" id="vent-shaft">
			<!--content-->
			<div class="panel-group" id="accordion3">
				<%var count = 0; for (var i in raw["Vent Shaft"]) { count++;
				var row = raw["Vent Shaft"][i];			
				%>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion3" href="#<%=String.prototype.toSlug(i)%>3">
								<%=i%>
							</a>
						</h4>
					</div>
					<div id="<%=String.prototype.toSlug(i)%>3" class="panel-collapse collapse <%if(count==1){%>in<%}%>">
						<div class="panel-body">
							<table class="table table-bordered table-condensed table-hover" style="font-size: 100%;">
								<thead>
								<th style="text-align: center;width: 50%">Item</th><th style="color: #FFAF78;text-align: center;">Progress</th>
								</thead>
								<%for (var j in row) {
								if(typeof row[j] === 'number' || typeof row[j] === 'string') {
								%>
								<tr>
									<td style="font-size: 15px"><%=j%></td>
									<% if(typeof row[j] === "number") {%>
									<td style="color: #ffd461; text-align: right;"><%=row[j].toFixed(1)%>%</td>
									<%} else {%>
									<td style="color: #ffd461; text-align: right;">-%</td>
									<%}%>
								</tr>
							   <%}
							   else if(typeof row[j] === "object"){%>
							   <tr>
									<td style="font-size: 15px"><a href="#vs-<%=String.prototype.toSlug(i)%>-<%=String.prototype.toSlug(j)%>" data-toggle="modal"><%=j%> <small><i class="fa fa-table"></i></small></a></td>
									<% if(typeof row[j] === "number") {%>
									<td style="color: #ffd461; text-align: right;"><%=row[j].progress.toFixed(1)%>%</td>
									<%} else {%>
									<td style="color: #ffd461; text-align: right;">-%</td>
									<%}%>
								</tr>
							   <%} }%>
							</table>
						</div>
					</div>
				</div>
				<%}%>
			</div>
			<!--content ends-->
        </div>
        
    </div>
</div>

<!-- Generate Modal-->
<div class="modal" id="modal_default_3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title">Retaining</h4>
			</div>
			<div class="modal-body clearfix">
				<table class="table table-bordered table-condensed table-hover" style="">
					<thead>
					<tr><th>Activity</th><th style="color: #ffd461;text-align: right;">Accumulated</th><th style="color: #FFAF78;text-align: right;">Current Week</th><th colspan="2" style="text-align: center;">Total Progress</th>
					</tr>
					</thead>					
					 <tbody><tr>
						<td style="">Column Construction 1</td>
						<td style="color: #ffd461; text-align: right;">1,542</td>
						<td style="color: #FFAF78; text-align: right;">1,507</td>
						<td style="text-align: right;">98%</td>
						<td style="text-align: right;">96%</td>
					</tr>
					
					
					 <tr>
						<td style="">Column Construction 2</td>
						<td style="color: #ffd461; text-align: right;">357</td>
						<td style="color: #FFAF78; text-align: right;">330</td>
						<td style="text-align: right;">92%</td>
						<td style="text-align: right;">85%</td>
					</tr>
					
					
					 <tr>
						<td style="">Column Construction 3</td>
						<td style="color: #ffd461; text-align: right;">243</td>
						<td style="color: #FFAF78; text-align: right;">218</td>
						<td style="text-align: right;">94%</td>
						<td style="text-align: right;">84%</td>
					</tr>
					
					
					
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default btn-clean" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<%
for (var a in levels){
for (var i in raw[a]) {
var row = raw[a][i];
for (var j in row) {
items = row[j];
if(typeof items === "object"){
%>
<div class="modal" id="<%=levels[a]%>-<%=String.prototype.toSlug(i)%>-<%=String.prototype.toSlug(j)%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title"><%=i%> (<%=j%>)</h4>
			</div>
			<div class="modal-body clearfix">
				<table class="table table-bordered table-condensed table-hover" style="">
					<thead>
					<tr><th>Activity</th><th style="color: #ffd461;text-align: right;">Accumulated</th><th style="color: #FFAF78;text-align: right;">Current Week</th><th colspan="2" style="text-align: center;">Total Progress</th>
					</tr>
					</thead>					
					 <tbody>
					 <%for (var k in items.data) { var item=items.data[k]; %>
					 <tr>
						<td style=""><%=item[0]%></td>
						<td style="color: #ffd461; text-align: right;"><%=item[1]%></td>
						<td style="color: #FFAF78; text-align: right;"><%=item[2]%></td>
						<td style="text-align: right;"><%=item[3]%>%</td>
						<td style="text-align: right;"><%=item[4]%>%</td>
					</tr>
					<%}%>
					
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default btn-clean" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


<%}}}}%>
</body>
</html>
